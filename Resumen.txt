### **Estado Actual del Proyecto: BitÃ¡cora II**

Estoy desarrollando una aplicaciÃ³n en **Vue 3 con Quasar** llamada **BitÃ¡cora II** para gestionar pedidos internos, ubicaciones e inventario, tipo sistema de trabajo. El objetivo es generar un archivo .APK para instalarla y usarla en un celular fÃ­sico, con la meta final de publicarla en la Play Store de Google.

#### ğŸ“¦ **Estructura Actual**

##### ğŸ§© **Componentes Principales:**

* **PedidosRealizados.vue:** Muestra todos los pedidos guardados y tiene un botÃ³n para **enviar** el Excel.

* **HistorialPedidos.vue:** Muestra un historial de pedidos agrupados por fechas, tambiÃ©n con botÃ³n de **Enviar**.

* **Inicio.vue (PanelInicio.vue):** Pantalla principal con navegaciÃ³n a las distintas funciones.

* **ModalNuevoPedido.vue:** Modal para agregar un pedido manual, con input, botÃ³n de cÃ¡mara y confirmaciÃ³n con Enter o botÃ³n de aceptar.  
  - El input manual agrega un solo pedido y se cierra automÃ¡ticamente al confirmar.  
  - El botÃ³n de cÃ¡mara abre **CamaraPedidos.vue**, donde se pueden escanear varios pedidos a la vez.

* **CamaraPedidos.vue:** Modal que integra cÃ¡mara en un `<div>` con botones personalizados y soporte para escaneo de cÃ³digos de barra usando **@zxing/library**.

* **AjustarUbicaciones.vue:** Nueva tabla para gestionar ubicaciones de artÃ­culos, con formulario responsive (inputs en columna en pantallas chicas) y opciones para editar o eliminar.

* **ModalEliminar.vue:** Modal genÃ©rico y reutilizable para confirmaciÃ³n de eliminaciones, usado tanto en pedidos como en ubicaciones.

##### ğŸ“ **LÃ³gica de ExportaciÃ³n y Guardado de Archivos:**

* Uso la librerÃ­a **xlsx** para generar los datos Excel en memoria.
* LÃ³gica para descarga directa en la web (`exportarExcel.js`).
* MÃ³dulo reutilizable (`src/components/Pedidos/GeneraExcel/GeneraExcel.js`) con la funciÃ³n `generarYGuardarExcelTemporal`.
* FunciÃ³n que usa **@capacitor/filesystem** para guardar el archivo Excel (en Base64) como archivo fÃ­sico temporal en el dispositivo (`Directory.Cache`).
* El archivo Excel se guarda con un nombre dinÃ¡mico que incluye el rango de fechas (`Pedidos_DD-MM-AAAA_a_DD-MM-AAAA.xlsx`).

##### ğŸ’¾ **Almacenamiento de Pedidos:**

* Uso **@capacitor/preferences** para persistencia de pedidos y fechas (`usoAlmacenamientoCapacitor.js`).
* Manejo centralizado en `almacenamiento.js` que decide quÃ© sistema usar.
* Rutas ajustadas para evitar errores de imports dinÃ¡micos (404 corregidos).

##### ğŸ“· **IntegraciÃ³n de CÃ¡mara y Escaneo:**

* Implementado con **@zxing/library** embebido en un `<div>` con botones propios, reemplazando el uso directo de **@capacitor/camera**.
* **CamaraPedidos.vue** permite mostrar la cÃ¡mara, controlar permisos y escanear en tiempo real.
* Miniatura de la Ãºltima captura mostrada sobre la cÃ¡mara, mejorando la UX.
* Manejo de errores optimizado y logs en pantalla para depuraciÃ³n.

---

##### âœ… **Resumen de Logros Actuales:**

* Persistencia funcional de datos de pedidos.
* **GeneraciÃ³n y guardado nativo de archivos Excel temporales** con Capacitor Filesystem.
* **Funcionalidad de envÃ­o por aplicaciones nativas** usando @capacitor/share.
* Nombre de archivo Excel adaptado dinÃ¡micamente al rango de fechas.
* Escaneo de cÃ³digos de barra implementado y funcionando en dispositivo real.
* CÃ¡mara embebida en un `<div>` con interfaz personalizable y botones propios.
* SeparaciÃ³n clara y modular de responsabilidades (UI, datos, generaciÃ³n/guardado, envÃ­o, cÃ¡mara, escaneo).
* ReutilizaciÃ³n de componentes (botones flotantes, modales, cÃ¡mara).
* Feedback al usuario con notificaciones de Ã©xito y error.
* NavegaciÃ³n principal funcional y errores de rutas corregidos.
* Manejo robusto de permisos de cÃ¡mara.
* Input manual de pedidos funcionando con Enter y botÃ³n confirmar, emitido directamente a la tabla principal.
* **Nuevo mÃ³dulo de Ajuste de Ubicaciones con tabla y formulario responsive.**
* **CreaciÃ³n de ModalEliminar.vue genÃ©rico, reutilizable en pedidos y ubicaciones.**

---

##### ğŸ¯ **Siguiente objetivo:**

* Refinar experiencia de usuario en el envÃ­o (agregar opciones, manejo de errores, etc.).
* Mejorar UI/UX segÃºn feedback.
* Optimizar escaneo de cÃ³digos con distintos formatos de cÃ³digos de barra y QR.
* AÃ±adir funciones Ãºtiles para el trabajo, como inventario de ubicaciones exportable a Excel.
* Incorporar funciÃ³n de control de stock, similar a pedidos y ubicaciones, con posibilidad de exportar a Excel y enviar por correo.
* Ajustes finales en la interfaz de cÃ¡mara y modales para que sean mÃ¡s intuitivos y consistentes.

---

src
â”œâ”€â”€ App.vue
â”œâ”€â”€ css
â”‚   â””â”€â”€ app.css
â”œâ”€â”€ layouts
â”‚   â””â”€â”€ MainLayout.vue
â”œâ”€â”€ pages
â”‚   â”œâ”€â”€ AjustarUbicaciones.vue
â”‚   â”œâ”€â”€ ErrorNotFound.vue
â”‚   â””â”€â”€ TablaPedidos.vue
â”œâ”€â”€ router
â”‚   â”œâ”€â”€ index.js
â”‚   â””â”€â”€ routes.js
â”œâ”€â”€ components
â”‚   â”œâ”€â”€ BaseDeDatos
â”‚   â”‚   â”œâ”€â”€ almacenamiento.js
â”‚   â”‚   â”œâ”€â”€ usoAlmacenamientoCapacitor.js
â”‚   â”‚   â”œâ”€â”€ usoAlmacenamientoPedidos.js
â”‚   â”‚   â””â”€â”€ usoAlmacenamientoUbicaciones.js
â”‚   â”œâ”€â”€ Botones
â”‚   â”‚   â”œâ”€â”€ BotonFlotante.vue
â”‚   â”‚   â”œâ”€â”€ BotonesDescargarEnviar.vue
â”‚   â”‚   â”œâ”€â”€ BotonesNavegacion.vue
â”‚   â”‚   â””â”€â”€ TresBotones.vue
â”‚   â”œâ”€â”€ Camara
â”‚   â”‚   â””â”€â”€ CamaraPedidos.vue
â”‚   â”œâ”€â”€ Inicio
â”‚   â”‚   â””â”€â”€ PanelInicio.vue
â”‚   â”œâ”€â”€ Logica
â”‚   â”‚   â”œâ”€â”€ Envios
â”‚   â”‚   â”‚   â””â”€â”€ CompartirExcel.js
â”‚   â”‚   â”œâ”€â”€ Pedidos
â”‚   â”‚   â”‚   â””â”€â”€ GeneraExcel
â”‚   â”‚   â”‚       â”œâ”€â”€ GeneraExcel.js
â”‚   â”‚   â”‚       â””â”€â”€ ExportarPedidosExcel.js
â”‚   â”‚   â””â”€â”€ Ubicaciones
â”‚   â”‚       â”œâ”€â”€ FormularioUbicacion.vue
â”‚   â”‚       â””â”€â”€ TablaUbicaciones.vue
â”‚   â”œâ”€â”€ Modales
â”‚   â”‚   â”œâ”€â”€ ModalEditarPedido.vue
â”‚   â”‚   â”œâ”€â”€ ModalEditarUbicacion.vue
â”‚   â”‚   â”œâ”€â”€ ModalEliminar.vue
â”‚   â”‚   â””â”€â”€ ModalNuevoPedido.vue
â”‚   â””â”€â”€ Pedidos
â”‚       â”œâ”€â”€ HistorialPedidos.vue
        â””â”€â”€ PedidosRealizados.vue