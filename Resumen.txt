### **Estado Actual del Proyecto: Bitácora II**

Estoy desarrollando una aplicación en **Vue 3 con Quasar** llamada **Bitácora II**, orientada a la gestión de **pedidos internos, ubicaciones e inventario**. Es un sistema de trabajo pensado para correr como aplicación móvil en Android, con la meta de generar un archivo **.APK** e instalarlo en un dispositivo físico, para luego publicarlo en la **Play Store de Google**.  

---

### 📦 **Estructura Actual**

#### 🧩 **Componentes Principales**
- **PedidosRealizados.vue:** Muestra todos los pedidos guardados y ofrece un botón para **enviar** el Excel.  
- **HistorialPedidos.vue:** Historial de pedidos agrupados por fechas, también con botón de **Enviar**.  
- **Inicio.vue (PanelInicio.vue):** Pantalla principal de navegación hacia las distintas funciones.  
- **ModalNuevoPedido.vue:** Modal para agregar pedidos manuales, con input, botón de cámara y confirmación.  
  - Input manual: agrega un solo pedido y cierra el modal automáticamente.  
  - Botón de cámara: abre **CamaraPedidos.vue** para escanear múltiples pedidos.  
- **CamaraPedidos.vue:** Modal con cámara embebida en un `<div>` + botones personalizados. Usa **@zxing/library** para escaneo en tiempo real de códigos de barra y QR.  
- **AjustarUbicaciones.vue:** Nueva tabla para gestionar ubicaciones de artículos, con formulario responsive (inputs en columna en pantallas chicas), edición y eliminación. Además, **el botón de enviar Excel ya funciona correctamente**.  
- **ModalEliminar.vue:** Modal genérico, reutilizable tanto en pedidos como en ubicaciones.  

---

#### 📁 **Lógica de Exportación y Guardado de Archivos**
- Uso de **xlsx** para generar datos Excel en memoria.  
- Descarga directa en la web (`exportarExcel.js`).  
- Módulo reutilizable (`GeneraExcel.js`) con función `generarYGuardarExcelTemporal`.  
- Uso de **@capacitor/filesystem** para guardar Excel en Base64 en `Directory.Cache`.  
- Nombre de archivo dinámico con rango de fechas (`Pedidos_DD-MM-AAAA_a_DD-MM-AAAA.xlsx`).  
- Nuevo módulo: **ExportarUbicacionesExcel.js** para manejar exportación y envío de Excel desde el módulo de ubicaciones.  

---

#### 💾 **Almacenamiento de Datos**
- Persistencia con **@capacitor/preferences**.  
- Manejo centralizado en `almacenamiento.js` (decide qué sistema usar).  
- `usoAlmacenamientoPedidos.js` y `usoAlmacenamientoUbicaciones.js` para modularizar la lógica.  
- Rutas corregidas para evitar errores de imports dinámicos (404).  

---

#### 📷 **Integración de Cámara y Escaneo**
- Implementación con **@zxing/library** dentro de un `<div>` con botones personalizados.  
- **CamaraPedidos.vue** maneja permisos de cámara, escaneo en tiempo real y muestra miniatura de la última captura.  
- Feedback de errores en pantalla (depuración más simple).  
- Optimización del escaneo para códigos de barra y QR ✅ (objetivo cumplido).  

---

#### 🗂️ **Módulo de Ubicaciones**
- **FormularioUbicacion.vue:** Alta/edición con inputs adaptables (responsive).  
- **TablaUbicaciones.vue:** Lista de ubicaciones con botones de acción.  
- **ModalEditarUbicacion.vue:** Edición puntual de ubicaciones.  
- **ModalEliminar.vue:** Confirmación reutilizada.  
- **ExportarUbicacionesExcel.js:** Exportación y envío de ubicaciones en Excel.  

---

### ✅ **Resumen de Logros Actuales**
- Persistencia de pedidos y ubicaciones funcional.  
- **Generación y guardado nativo de Excel temporales** con Capacitor Filesystem.  
- **Envío de archivos Excel por apps nativas** con @capacitor/share.  
- Escaneo en tiempo real de códigos de barra y QR funcionando en dispositivo físico.  
- Cámara embebida con botones propios, permisos gestionados y miniaturas.  
- Nombre de archivos Excel dinámico con rango de fechas.  
- Separación modular: UI, datos, generación/guardado, envío, cámara.  
- Reutilización de componentes (botones flotantes, modales, cámara).  
- Feedback al usuario (notificaciones de éxito/error).  
- Navegación principal estable y rutas corregidas.  
- **Gestión completa de ubicaciones con tabla y formulario responsive.**  
- **Botón de enviar Excel desde AjustarUbicaciones funcionando correctamente.**  
- **ModalEliminar.vue genérico y reutilizable.**  

---

### 🎯 **Siguientes Objetivos**
- **Refinar experiencia de usuario en los envíos** (opciones extra, manejo de errores).  
- **Mejorar UI/UX** con base en feedback.  
- **Control de stock**: módulo nuevo, similar al de ubicaciones, con exportación y envío de Excel.  
- **Ajustes finales en la interfaz de cámara y modales** para mayor consistencia.  
- **integrar cámara** con ubicaciones para escanear artículos mas rápido.

---

### 📂 **Estructura de Archivos (src)**


### 📂 Estructura del Proyecto
src
├── App.vue
├── css
│   └── app.css
├── layouts
│   └── MainLayout.vue
├── pages
│   ├── AjustarUbicaciones.vue
│   ├── ErrorNotFound.vue
│   └── TablaPedidos.vue
├── router
│   ├── index.js
│   └── routes.js
├── components
│   ├── BaseDeDatos
│   │   ├── almacenamiento.js
│   │   ├── usoAlmacenamientoCapacitor.js
│   │   ├── usoAlmacenamientoPedidos.js
│   │   └── usoAlmacenamientoUbicaciones.js
│   ├── Botones
│   │   ├── BotonFlotante.vue
│   │   ├── BotonesDescargarEnviar.vue
│   │   ├── BotonesNavegacion.vue
│   │   └── TresBotones.vue
│   ├── Inicio
│   │   └── PanelInicio.vue
│   ├── Logica
│   │   ├── Envios
│   │   │   └── CompartirExcel.js
│   │   ├── Pedidos
│   │   │   ├── CamaraPedidos.vue
│   │   │   ├── CompartirExcel.js
│   │   │   ├── ExportarPedidosExcel.js
│   │   │   └── GeneraExcel.js
│   │   └── Ubicaciones
│   │       ├── CamaraEscaneo.vue
│   │       ├── FormularioUbicacion.vue
│   │       ├── TablaUbicaciones.vue
│   │       ├── ExportarUbicacionesExcel.js
│   │       └── CamaraUbicaciones.vue
│   ├── Modales
│   │   ├── ModalEditarPedido.vue
│   │   ├── ModalEditarUbicacion.vue
│   │   ├── ModalEliminar.vue
│   │   └── ModalNuevoPedido.vue
│   └── Pedidos
│       ├── HistorialPedidos.vue
│       └── PedidosRealizados.vue