### **M√≥dulo de Pedidos - Bit√°cora II**

Sistema completo para gesti√≥n de pedidos diarios con historial, exportaci√≥n y sistema gamificado de recompensas.

---

### üì¶ **Componentes Principales**

#### **TablaPedidos.vue**
- **Pantalla principal** del m√≥dulo de pedidos
- **Tabla de √∫ltimos 3 pedidos** realizados
- **Integraci√≥n completa** con ContadorPedidosDiarios
- **Bot√≥n agregar** para abrir ModalNuevoPedido
- **Navegaci√≥n** a PedidosRealizados y HistorialPedidos
- **Responsive** con dise√±o adaptativo

#### **ModalNuevoPedido.vue**
- **Modal para agregar pedidos** manualmente
- **Input manual**: agrega un solo pedido y cierra autom√°ticamente
- **Bot√≥n de c√°mara**: abre CamaraPedidos.vue para escanear m√∫ltiples c√≥digos
- **Validaciones** con feedback visual
- **Integraci√≥n** con sistema de persistencia

#### **CamaraPedidos.vue**
- **Modal con c√°mara embebida** para escaneo en tiempo real
- **@zxing/library** para escaneo de c√≥digos de barra y QR
- **Miniatura de √∫ltima captura**
- **Lista de c√≥digos escaneados** con opci√≥n de eliminar
- **Botones**: finalizar (confirma todos), cancelar
- **Manejo de permisos** de c√°mara

#### **PedidosRealizados.vue**
- **Lista completa** de todos los pedidos guardados
- **Ordenados por fecha** (m√°s recientes primero)
- **Bot√≥n enviar Excel** con todos los pedidos
- **Acciones individuales**: editar y eliminar
- **Modal de edici√≥n** integrado
- **Contador total** de pedidos

#### **HistorialPedidos.vue**
- **Agrupaci√≥n de pedidos por fechas**
- **Vista expandible** por fecha
- **Exportaci√≥n por rango** de fechas seleccionado
- **Bot√≥n enviar Excel** del rango
- **Contador de pedidos** por fecha
- **Dise√±o tipo acorde√≥n**

#### **‚úÖ ContadorPedidosDiarios.vue - Sistema Gamificado**
- **Contador autom√°tico** de pedidos del d√≠a actual
- **Reinicio a medianoche** autom√°tico (verificaci√≥n cada minuto)
- **üéØ Sistema de recompensas**: Iconos din√°micos seg√∫n productividad
  - üëç **1-9 pedidos**
  - üî• **10-19 pedidos**
  - ‚ö° **20-29 pedidos**
  - ‚≠ê **30-39 pedidos**
  - üíé **50+ pedidos**
- **L√≥gica diferenciada**: Fin de semana vs d√≠as laborables
- **Persistencia** entre sesiones con `@capacitor/preferences`
- **Actualizaci√≥n autom√°tica** al agregar pedidos

---

### üìÅ **L√≥gica de Exportaci√≥n**

#### **ExportarPedidosExcel.js**
- **Generaci√≥n de Excel** con pedidos
- **Dos modos**:
  - **Rango de fechas**: `Pedi Usuario DD-MM-AAAA - DD-MM-AAAA.xlsx`
  - **Mes actual**: `Pedi Usuario - MM-AAAA.xlsx`
- **Nombre de hoja**: Nombre del usuario
- **Columnas**: Fecha, C√≥digo del pedido
- **Formato de fecha**: DD/MM/AAAA
- **Ordenamiento**: Por fecha descendente
- **Integraci√≥n** con nombre de usuario de configuraci√≥n

#### **GeneraExcel.js**
- **M√≥dulo reutilizable** para generar Excel
- **Funci√≥n principal**: `generarYGuardarExcelTemporal()`
- **Genera**: archivo Excel en memoria con `xlsx`
- **Guarda**: en `Directory.Cache` con `@capacitor/filesystem`
- **Retorna**: URI del archivo temporal
- **Formato**: Base64 para compatibilidad con Capacitor

#### **CompartirExcel.js**
- **Funci√≥n**: `compartirArchivo(rutaArchivo, nombreArchivo)`
- **Share API nativa** de Capacitor
- **T√≠tulo**: "Exportar pedidos"
- **Compatible** con todas las apps de compartir del sistema

---

### üíæ **Almacenamiento y Persistencia**

#### **usoAlmacenamientoPedidos.js**
- **M√≥dulo especializado** para pedidos
- **Funciones principales**:
  - `guardarPedidos(pedidos)`
  - `obtenerPedidos()`
  - `agregarPedido(codigo)`
  - `eliminarPedido(id)`
  - `editarPedido(id, nuevoCodigo)`
  - `limpiarPedidos()`
- **Estructura de pedido**: `{ id, codigo, fecha }`
- **Persistencia** en `@capacitor/preferences`
- **Key**: `"pedidos"`

---

### üéØ **Sistema de Logros Gamificado**

- **Detecci√≥n autom√°tica** de fin de semana (s√°bado/domingo)
- **Umbrales diferentes** seg√∫n d√≠a de la semana
- **Reconocimiento cada 10 pedidos** con cambio de icono
- **Persistencia del contador** durante todo el d√≠a
- **Reset autom√°tico** a las 00:00
- **Mensajes motivacionales** diferenciados

---

### üîÑ **Integraci√≥n con Barra de Botones**

#### **TablaPedidos.vue**
- `mostrarAtras: true`
- `mostrarInicio: true`
- `mostrarAgregar: true`
- `mostrarEnviar: false`

#### **PedidosRealizados.vue**
- `mostrarAtras: true`
- `mostrarInicio: true`
- `mostrarAgregar: false`
- `mostrarEnviar: pedidos.length > 0`

#### **HistorialPedidos.vue**
- `mostrarAtras: true`
- `mostrarInicio: true`
- `mostrarAgregar: false`
- `mostrarEnviar: hayRangoSeleccionado`

---

### üé® **Caracter√≠sticas de UI/UX**

- **Tabla responsive** con dise√±o de cards en m√≥vil
- **Animaciones suaves** en transiciones
- **Feedback visual** inmediato
- **Iconos consistentes** con @tabler/icons-vue
- **Estados de carga** con spinners
- **Notificaciones** de √©xito/error con Quasar Notify
- **Confirmaciones** antes de acciones destructivas
- **Colores tem√°ticos** seg√∫n logro alcanzado

---

### üîß **Dependencias Espec√≠ficas**

- **xlsx**: Generaci√≥n de archivos Excel
- **@capacitor/filesystem**: Guardado de archivos
- **@capacitor/share**: Compartir archivos
- **@capacitor/preferences**: Persistencia de datos
- **@zxing/library**: Escaneo de c√≥digos
- **@tabler/icons-vue**: Iconograf√≠a

---

### üìù **Notas Importantes**

- Los pedidos se guardan **autom√°ticamente** al agregarlos
- El contador diario se **resetea solo** a medianoche
- Los archivos Excel se generan en **memoria** y se guardan temporalmente
- El **nombre de usuario** de configuraci√≥n se integra en nombres de archivo
- El sistema de logros **motiva** la productividad sin ser intrusivo
